# “行业动态”模块 - 企业管理员权限测试报告

**版本**: 1.0
**测试人员**: (您的名字)
**测试日期**: 2025-06-20

## 1. 测试目的
本文档旨在记录和验证“行业动态”模块中，**企业管理员（`companyRole: 2`）** 角色的核心权限与功能流程，确保其符合设计预期。

## 2. 测试准备
- **测试环境**: 本地开发环境 (`http://localhost:8080`)
- **测试账号**:
    - 用户名: `realadmin`
    - 密码: `123456`
    - 权限: 已通过 `POST /api/users` 接口创建，角色为 **企业管理员** (`companyRole = 2`)。
- **前置操作**: 已通过 `POST /api/v1/auth/login` 接口成功登录 `realadmin` 账号，并获取了有效的JWT Token。后续所有请求均在Headers中携带 `Authorization: Bearer <token>`。

## 3. 测试用例与结果

### 3.1 测试用例：发布动态（成功）

* **目的**: 验证企业管理员发布的动态，其初始状态为“待审核”。
* **请求**:
    * **方法**: `POST`
    * **URL**: `/api/news`
    * **请求体**: `{ "title": "由企业管理员realadmin发布", "content": "..." }`
* **预期结果**: HTTP状态码 `200`，返回的动态数据中 `status` 字段为 `0`。
* **实际结果**: **测试通过**。服务器成功返回200，且返回的动态（ID为7）`status`为`0`，符合预期。

### 3.2 测试用例：修改动态（成功）

* **目的**: 验证企业管理员可以修改自己公司发布的动态。
* **请求**:
    * **方法**: `PUT`
    * **URL**: `/api/news/7` (使用上一步创建的动态ID)
    * **请求体**: `{ "title": "企管修改自己的动态" }`
* **预期结果**: HTTP状态码 `200`，操作成功且标题被更新。
* **实际结果**: **测试通过**。服务器成功返回200，动态标题已更新。

### 3.3 测试用例：审核动态（失败）

* **目的**: 验证企业管理员**无权**调用超级管理员专属的审核接口。
* **请求**:
    * **方法**: `PUT`
    * **URL**: `/api/admin/news/7/status`
    * **请求体**: `{ "status": 1 }`
* **预期结果**: HTTP状态码 `403 Forbidden`。
* **实际结果**: **测试通过**。服务器成功返回`403 Forbidden`，证明权限隔离有效。

### 3.4 测试用例：删除动态（成功）

* **目的**: 验证企业管理员可以删除自己公司发布的动态。
* **请求**:
    * **方法**: `DELETE`
    * **URL**: `/api/news/7`
* **预期结果**: HTTP状态码 `200`（或`204`），操作成功。
* **实际结果**: **测试通过**。服务器成功返回200，操作成功。

## 4. 测试结论
企业管理员角色的权限逻辑完全符合设计预期。其可以创建（待审核）、修改、删除自己公司的动态，但无法访问超级管理员的审核接口。模块功能健壮，权限控制严密。